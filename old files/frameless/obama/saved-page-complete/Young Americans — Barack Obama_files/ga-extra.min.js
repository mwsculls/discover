try{var _gaq=_gaq||[],optimizely=optimizely||[];(function(e){function n(e,t,n,r,i){_gaq.push(["_trackSocial",e,t,n,r],["_trackEvent",e,t,r,i])}function r(e){var t=document.createElement("a");t.href=e;return t}function i(e){return e&&r(e).pathname.replace(/(^\/?)/,"/")}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){var t;return(t=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?t[1]:null}function c(t){if(t.match(/contribution/i)&&e("form#contribution").length){var n=Math.round(e("#amt_other").attr("checked")?e("#amt_other_text").val():e('input[name="amount"]:checked').val());return n!=n||Math.abs(n)>1e9?0:n}return 0}var t=window.onerror;window.onerror=function(e,n,r){t&&t(e,n,r);_gaq.push(["_trackEvent","JS Error",e,n+"_"+r,0,!0])};var u=function(){var e={};location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,r){e[n]=r});return e}(),a={};if(o("td")){a.encodedValue=o("td");a.source="cookie"}else if(u.td){a.encodedValue=u.td;a.source="url"}if(a.encodedValue){function f(t){var n=t.modulename;if(n){var r=t.formname||""+t.saved-payment-info,i=t.transaction_amt;_gaq.push(["_trackEvent","Completions",t.modulename,r,Math.ceil(i||0)]);optimizely.push(["trackEvent","bsdtracker_"+t.modulename]);if(i){var s=t.contribution_key,o=e.inArray(i,t.pageamounts)!==-1?Math.round(i):"other",u=t.contribution_page_id+"_"+o,f=+t.pagetype,l=+t.is_recurring?"BSD Recurring":"BSD";if(t.used_quick_donate){l+=" Quick Donate";u+="_QD"}l+=f===4?" Memberships":f===2?" Tickets":f===3?" Custom Contributions":" Contributions";_gaq.push(["_addTrans",s,"",i,"0","0","","",""],["_addItem",s,u,r,l,i,"1"],["_trackTrans"]);i=i>100?100:i;optimizely.push(["trackEvent","bsdtracker",i*100]);a.source==="cookie"&&(document.cookie="td=;path=/;domain=.barackobama.com;expires=Thu, 01 Jan 1970 00:00:01 GMT")}}}if(window.BSDTracker){var l=BSDTracker.signup?"signup":BSDTracker.contribution?"contribution":BSDTracker.quickdonate?"quickdonate":!1;l&&f(BSDTracker[l].jsonData)}else e.getJSON("//donate.barackobama.com/page/tracking/action-decode?td="+a.encodedValue+"&callback=?",function(e){f(e)})}u.savedPaymentInfo&&_gaq.push(["_trackEvent","Completions","quickdonate","",0,!0]);e.fn.analytics=function(t,n,r){if(!t)return this.trigger(n||"mousedown");var i=n?n+".analytics":"keydown.analytics mousedown.analytics",s=r||"one";return this[s](i,function(r){if(n||r.type==="mousedown"||r.which===13)typeof t=="function"?t.apply(this):e.isArray(t)&&t[1]&&typeof t[1]!="number"?_gaq.push(["_trackEvent"].concat(t)):(typeof t=="string"||e.isArray(t))&&optimizely.push(["trackEvent"].concat(t))})};e.fn.registerBSDError=function(e){this.length&&_gaq.push(["_trackEvent","Action Error",e,i(document.referrer),c(e),0,!0])};e(document).ready(function(){function t(n){if(n.type==="mousedown"||n.which===13){$this=e(this);$this.unbind("keydown mousedown",t);var r=$this.is("form")?$this:$this.closest("form"),i=r.attr("id")||r.attr("name")||r.attr("action")||"(none)";_gaq.push(["_trackEvent","Form Submits",i,location.pathname,c(i)])}}e("input").filter('[type="image"],[type="submit"]').add("button").bind("mousedown",t);e("form").bind("keydown",t);e("[href^='http']").analytics(function(e){if(this.hostname!==location.hostname){var t=/(facebook|twitter|addthis|youtube)(\.com)/i.exec(this.href);if(t){var r=this.href.match(/facebook\.com\/sharer.php/)?decodeURIComponent(this.href.replace("http://www.facebook.com/sharer.php?u=","")):this.href;n(s(t[1]),"click",r,i(r))}else _gaq.push(["_trackEvent","Exits","external",this.href])}},null,"live");e("span.signuperror").registerBSDError("Signup");e("div.contriberrorbanner").registerBSDError("Contribution");e("#invitationpage .error").registerBSDError("Share");(function(){function a(e){var t=e||jQuery(window).width();return t?t>=960?"Desktop":t>=768?"Tablet":t>=480?"Horizontal Mobile":"Vertical Mobile":"None"}function l(){return setTimeout(function(){var e=a();if(e!==f){_gaq.push(["_trackEvent","Break Point Change",e,f,0,!0]);f=a()}jQuery(window).one("resize",l)},1e3)}function c(){return setTimeout(function(){_gaq.push(["_trackEvent","Orientation Change",a(),0,!0]);jQuery(window).one("orientationchange",c)},1e3)}if(ofa&&ofa.LOE&&!o("loega")){var e=[],t,n=0,r;for(var i in ofa.LOE)if(ofa.LOE[i]&&typeof ofa.LOE[i]=="boolean"){if(i==="donor"){t=ofa.LOE.last_donation;n=Math.round((new Date-new Date(t))/864e5);t<"2011-04-03"?i="lapsed"+i:n>30&&(i="nonrecent"+i)}e.push(i)}r=e.length?e.sort().join("_"):"Anonymous";t||(t=ofa.LOE.region+"_"+ofa.LOE.locality);_gaq.push(["_trackEvent","Ladder of Engagement",r,t,n,!0]);document.cookie="loega=1;path=/;domain=.barackobama.com";var s=new Date,u=s.getUTCHours()+":"+("0"+s.getUTCMinutes()).slice(-2);_gaq.push(["_trackEvent","UTC Time",u,"",0,!0])}var f=a();jQuery(window).one("resize",l);jQuery(window).one("orientationchange",c)})()});e(window).load(function(){if(window.FB&&FB.Event){var t={"edge.create":"Like","comment.create":"Comment","auth.login":"Login","comment.remove":"Uncomment","edge.remove":"Unlike","auth.logout":"Logout"};e.each(t,function(e,t){FB.Event.subscribe(e,function(e){var r=e.href||typeof e=="string"?e:undefined;n("Facebook",t,r,i(r))})})}window.twttr&&twttr.events&&"click tweet retweet follow favorite".replace(/\w+/g,function(t){twttr.events.bind(t,function(t){var i;t&&t.target&&(t.target.src?i=r(decodeURIComponent((t.target.src.match(/[&#?](url=)([^&]*)/)||[""]).pop())):t.target.href&&e.each(decodeURIComponent(t.target.search).replace(/\+/g," ").split(" "),function(e,t){if(t.match(/(^https?:\/\/)|(^www\.)/)){i=r(t);return!1}}));n("Twitter",t.type,i.href.replace(i.hash,""),i.pathname)})});if(optimizely.variationNamesMap){var s=optimizely.variationNamesMap;for(var o in s)s.hasOwnProperty(o)&&_gaq.push(["_trackEvent","Optimizely",optimizely.allExperiments[o].name,s[o],0,!0])}})})(jQuery)}catch(err){_gaq.push(["_trackEvent","JS Error",err.type,"",0,!0])};